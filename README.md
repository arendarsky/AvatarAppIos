# AvatarAppIos

## About
XCE FACTOR - это приложение для одноименного шоу талантов. Глваной задачей проекта является создание платформы для онлайн-кастинга в очный финал: в приложении люди могут загружать видео своих талантов и оценивать видео других, а авторы топ-20 лучших роликов попадут в финал.
Приложение доступно в [App Store](https://apps.apple.com/ru/app/xce-factor/id1500607490).

## Языки программирования и фреймворки
Приложение написано на Swift версии 5+ с использованием таких средств iOS SDK, как: Foundation (URLSession, FileManager, UserDefaults и многое другое), UIKit, AVKit, Grand Central Dispatch, Core Graphics & Animation, Core Haptics, UserNotifications SafariServices и других.

Некоторые сторонние фреймворки, используемые в проекте:
* Alamofire - для загрузки видео и картинок на сервер
* IQKeyboardManager - менеджер клавиатуры, помогает в том, чтобы клавиатура не загораживала поля ввода текста, позволяет удобно добавлять кастомные кнопки 
* Firebase - Cloud Messaging & Crashlytics
* Firebase, Amplitude, Facebook SDK - аналитика
* NVActivityIndicatorView - набор кастомизируемых анимированных индикаторов

## Основные функции приложения
![Промо-скриншоты приложения. Источник: App Store](https://sun9-48.userapi.com/c858132/v858132603/20f2c2/MmeDW6XLn0w.jpg)


_Каждый раздел также сопровождается инструкциями и подсказками к использованию_

#### Кастинг
* Главный экран приложения - Кастинг - появляется первым после запуска и авторизации/регистрации. В Кастинге можно смотреть и оценивать видео участников шоу талантов.
* В Кастинге воспроизводится выбранный автором фрагмент видео (до 30 секунд)
* Видео можно оценить лайком или "дизлайком"(который не отнимает количество лайков, а просто пропускает видео). Для этого можно нажать на соответсвующие кнопки или просто свайпнуть видео вправо или влево.
* Можно поделиться ссылкой на видео или добавить в Instagram Stories _(еще не вышло в App Store)_
* С этого экрана можно также:

      • добавить новое видео при нажатии кнопки "+" (см. "Загрузка видео")
      • перейти в профиль автора видео (см. "Профиль")

#### Рейтинг
* Второй по важности экран приложения: здесь можно посмотреть топ лучших видео по количеству лайков и список полуфиналистов приложения
* При скролле видео воспроизводятся и ставятся на паузу автоматически
* Можно поделиться ссылкой на видео или добавить в Instagram Stories
* Этот раздел написан с использованием collection view c современным compositional layout. 
* С этого экрана можно также:

      • перейти в профиль автора видео (см. "Профиль")

#### Профиль
**1. Публичный:**

В публичном профиле можно увидеть основные данные пользователя: фото, имя, описание профиля и все загруженные видео.

Из профиля можно посмотреть полную версию каждого из видео пользователя, а также с помощью Context Menus поделиться ссылкой на видео или добавить в Instagram Stories.

**2. Приватный:**

В дополнение к функциям публичного профиля в личном профиле есть также возможности:

     • редактировать данные профиля (загрузить фото, изменить имя и описание + (еще не вышло в App Store) привязать аккаунт Instagram)
     • загрузить новое видео
     • отправить видео в Кастинг
     • изменить отображаемый фрагмент видео или удалить видео
     • открыть настройки, в которых можно изменить или сбросить свой пароль
     • выйти из аккаунта

#### Уведомления
На этом экране отображается список уведомлений (пока что только о лайках). 

Каждое уведомление представляет собой ячейку table view с именем пользователя и его фотографией, типом уведомления (напр. значок лайка - сердечко) и небольшим текстом. При нажатии на уведомление можно перейти в профиль пользователя.

#### Загрузка видео
Видео можно выбрать из галереи, либо снять камеру в приложении.

На экране "выбора лучших 30 секунд" можно выбрать отображаемый в Кастинге и Рейтинге фрагмент видео длительностью не более 30 секунд.

#### Видеоплееры
Для воспроизведения видео используется AVKit, большинство плееров являются кастомными на основе AVPlayerViewController, AVPlayerLayer.

Возможности плеера:
* Открыть на полный экран (в Кастинге), 
* Изменить размер видео во фрейме _(fill vs fit)_ по двойному тапу, 
* Mute - выключить звук (влияет на звук _всех_ видео в приложении), причем звук можно включить обратно при нажатии на кнопки громкости,
* Replay (в Кастинге) и Play/Pause (в Рейтинге) 

## Установка
Приложение можно скачать в [App Store](https://apps.apple.com/ru/app/xce-factor/id1500607490). Поддерживаются iPhone с iOS 13+.

Для запуска приложения из репозитория потребуется компьютер Mac с Xcode версии 11+ (для установки на свое устройство: iPhone, поддерживающий iOS 13+).

После запуска приложения можно зарегистрировать в нем собственный аккаунт (будет необходимо подтвердить почту) или воспользоваться тестовым: 

    >`vladisrusakov@yandex.ru`
    >>`samplePass123`
